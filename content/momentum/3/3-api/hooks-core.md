---
lastUpdated: "03/26/2020"
title: "Hooks in the core scope"
description: "Table of Contents mail queue maintain aaa log annotate batch Allow a module to assume responsibility for batch annotation assess batch Allow a module to assume responsibility for batch assessment binding group choose binding body modify bounce error classify cache get cache set check outbound conn throttle check outbound mess..."
---


| Name                                                                                                                                              | Description                                                                                                                                                 |
|---------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [__mail_queue_maintain](/momentum/3/3-api/hooks-core-mail-queue-maintain)                                   |                                                                                                                                                             |
| [aaa_log](/momentum/3/3-api/hooks-core-aaa-log)                                                               |                                                                                                                                                             |
| [annotate_batch](/momentum/3/3-api/hooks-core-annotate-batch)                                                 | Allow a module to assume responsibility for batch annotation                                                                                                |
| [assess_batch](/momentum/3/3-api/hooks-core-assess-batch)                                                     | Allow a module to assume responsibility for batch assessment                                                                                                |
| [binding_group_choose_binding](/momentum/3/3-api/hooks-core-binding-group-choose-binding)                     |                                                                                                                                                             |
| [body_modify](/momentum/3/3-api/hooks-core-body-modify)                                                       |                                                                                                                                                             |
| [bounce_error_classify](/momentum/3/3-api/hooks-core-bounce-error-classify)                                   |                                                                                                                                                             |
| [cache_get](/momentum/3/3-api/hooks-core-cache-get)                                                           |                                                                                                                                                             |
| [cache_set](/momentum/3/3-api/hooks-core-cache-set)                                                           |                                                                                                                                                             |
| [check_outbound_conn_throttle](/momentum/3/3-api/hooks-core-check-outbound-conn-throttle)                     |                                                                                                                                                             |
| [check_outbound_mess_throttle](/momentum/3/3-api/hooks-core-check-outbound-mess-throttle)                     |                                                                                                                                                             |
| [config_get_domain_relay](/momentum/3/3-api/hooks-core-config-get-domain-relay)                               |                                                                                                                                                             |
| [config_fetch_domain_routes](/momentum/3/3-api/hooks-core-config-fetch-domain-routes)                         | Override the routes setting                                                                                                                                 |
| [config_get_domain_host_failure_retry](/momentum/3/3-api/hooks-auto-config-get-domain-host-failure-retry)     | Determine whether there should be another delivery attempt                                                                                                  |
| [config_get_message_routing_domain](/momentum/3/3-api/hooks-core-config-get-message-routing-domain)           | Determine where to place a message                                                                                                                          |
| [config_option_post_set](/momentum/3/3-api/hooks-core-config-option-post-set)                                 |                                                                                                                                                             |
| [config_option_pre_set](/momentum/3/3-api/hooks-core-config-option-pre-set)                                   |                                                                                                                                                             |
| [connection_goal](/momentum/3/3-api/hooks-core-connection-goal)                                               |                                                                                                                                                             |
| [connection_post_bind](/momentum/3/3-api/hooks-core-connection-post-bind)                                     |                                                                                                                                                             |
| [control_allow_writable_config](/momentum/3/3-api/hooks-core-control-allow-writable-config)                   |                                                                                                                                                             |
| [control_allow_writable_config2](/momentum/3/3-api/hooks-core-control-allow-writable-config-2)                 |                                                                                                                                                             |
| [control_post_command](/momentum/3/3-api/hooks-core-control-post-command)                                     |                                                                                                                                                             |
| [control_post_control](/momentum/3/3-api/hooks-core-control-post-control)                                     |                                                                                                                                                             |
| [control_pre_command](/momentum/3/3-api/hooks-core-control-pre-command)                                       | This hook point occurs prior to the execution of a console command                                                                                          |
| [control_shutdown](/momentum/3/3-api/hooks-core-control-shutdown)                                             |                                                                                                                                                             |
| [control_shutdown_ex](/momentum/3/3-api/hooks-core-control-shutdown-ex)                                       | Invoked when shutdown occurs                                                                                                                                |
| [dec_inbound_connections](/momentum/3/3-api/hooks-core-dec-inbound-connections)                               |                                                                                                                                                             |
| [dec_outbound_connections](/momentum/3/3-api/hooks-core-dec-outbound-connections)                             |                                                                                                                                                             |
| [disk_queue_core_inject](/momentum/3/3-api/hooks-core-disk-queue-core-inject)                                 |                                                                                                                                                             |
| [dns_get_As](/momentum/3/3-api/hooks-core-dns-get-as)                                                         |                                                                                                                                                             |
| [dns_get_MXs](/momentum/3/3-api/hooks-core-dns-get-m-xs)                                                       |                                                                                                                                                             |
| [domain_requires_master_scheduler](/momentum/3/3-api/hooks-core-domain-requires-master-scheduler)             |                                                                                                                                                             |
| [ec_bag_find](/momentum/3/3-api/hooks-core-ec-bag-find)                                                       |                                                                                                                                                             |
| [ec_message_enqueue](/momentum/3/3-api/hooks-core-ec-message-enqueue)                                         | This hook is called whenever a message is passed to the ec_message_enqueue API                                                                              |
| [ec_message_mcmt_fixup](/momentum/3/3-api/hooks-core-ec-message-mcmt-fixup)                                   |                                                                                                                                                             |
| [ec_message_mcmt_pre_fixup](/momentum/3/3-api/hooks-core-ec-message-mcmt-pre-fixup)                           |                                                                                                                                                             |
| [ec_message_part_get_content_type](/momentum/3/3-api/hooks-core-ec-message-part-get-content-type)             |                                                                                                                                                             |
| [ec_message_set_next_attempt](/momentum/3/3-api/hooks-core-ec-message-set-next-attempt)                       | Allows modules to set the next attempt time of a message                                                                                                    |
| [ec_mime_component_extract_content_type](/momentum/3/3-api/hooks-core-ec-mime-component-extract-content-type) |                                                                                                                                                             |
| [ec_ssl_SSL_CTX_fixup](/momentum/3/3-api/hooks-core-ec-ssl-ssl-ctx-fixup)                                     | This hook provides an opportunity for modules to alter the context and add passphrase callbacks via OpenSSL functions                                       |
| [esmtp_message_sp_async_samfunc](/momentum/3/3-api/hooks-core-esmtp-message-sp-async-samfunc)                 |                                                                                                                                                             |
| [final_validation](/momentum/3/3-api/hooks-core-final-validation)                                             | This hook is invoked after the normal validation steps                                                                                                      |
| [gauge_cache_manip](/momentum/3/3-api/hooks-core-gauge-cache-manip)                                           |                                                                                                                                                             |
| [generate_bounces](/momentum/3/3-api/hooks-core-generate-bounces)                                             |                                                                                                                                                             |
| [generate_rfc3464_message](/momentum/3/3-api/hooks-core-generate-rfc-3464-message)                             |                                                                                                                                                             |
| [generate_rfc3464_message_preamble](/momentum/3/3-api/hooks-core-generate-rfc-3464-message-preamble)           |                                                                                                                                                             |
| [generate_soft_bounce_message](/momentum/3/3-api/hooks-core-generate-soft-bounce-message)                     |                                                                                                                                                             |
| [generate_soft_bounce_message_preamble](/momentum/3/3-api/hooks-core-generate-soft-bounce-message-preamble)   |                                                                                                                                                             |
| [get_inbound_tls_parameters](/momentum/3/3-api/hooks-core-get-inbound-tls-parameters)                         | Allows implementors to override and control the usage of TLS on a per-message basis when accepting mail into the system                                     |
| [get_msg_expiration_params](/momentum/3/3-api/hooks-core-get-msg-expiration-params)                           | Allows modules to customize the expiration parameters on a per-message basis                                                                                |
| [get_outbound_tls_parameters](/momentum/3/3-api/hooks-core-get-outbound-tls-parameters)                       | Allows implementors to override and control the usage of TLS on a per-message basis when delivering mail out of the system                                  |
| [get_protocol_string_for_trace_headers](/momentum/3/3-api/hooks-core-get-protocol-string-for-trace-headers)   |                                                                                                                                                             |
| [get_received_header_text](/momentum/3/3-api/hooks-core-get-received-header-text)                             | Use this hook to set the text of the Received header in a message                                                                                           |
| [inbound_smtp_tls_verify_callback](/momentum/3/3-api/hooks-core-inbound-smtp-tls-verify-callback)             |                                                                                                                                                             |
| [inc_inbound_connections](/momentum/3/3-api/hooks-core-inc-inbound-connections)                               |                                                                                                                                                             |
| [inc_outbound_conn_throttle](/momentum/3/3-api/hooks-core-inc-outbound-conn-throttle)                         |                                                                                                                                                             |
| [inc_outbound_connections](/momentum/3/3-api/hooks-core-inc-outbound-connections)                             |                                                                                                                                                             |
| [inc_outbound_mess_throttle](/momentum/3/3-api/hooks-core-inc-outbound-mess-throttle)                         |                                                                                                                                                             |
| [is_adaptive_scope_global](/momentum/3/3-api/hooks-core-is-adaptive-scope-global)                             |                                                                                                                                                             |
| [log_attempt_v1](/momentum/3/3-api/hooks-core-log-attempt-v-1)                                                 | Register a function with this hook whenever a message attempt event should be logged                                                                        |
| [log_client_connection_failure](/momentum/3/3-api/hooks-core-log-client-connection-failure)                   | Register a function with this hook that will be invoked whenever an outbound connection attempt fails                                                       |
| [log_client_connection_success](/momentum/3/3-api/hooks-core-log-client-connection-success)                   | Register a function with this hook that will be invoked whenever an outbound connection attempt succeeds                                                    |
| [log_delivery_v1](/momentum/3/3-api/hooks-core-log-delivery-v-1)                                               | Register a function with this hook whenever a delivery event should be logged.                                                                              |
| [log_error](/momentum/3/3-api/hooks-core-log-error)                                                           |                                                                                                                                                             |
| [log_permanent_failure_v1](/momentum/3/3-api/hooks-core-log-permanent-failure-v-1)                             | Register a function with this hook whenever a permanent failure event should be logged.                                                                     |
| [log_reception_v1](/momentum/3/3-api/hooks-core-log-reception-v-1)                                             | Register a function with this hook whenever a reception event should be logged.                                                                             |
| [log_rejection](/momentum/3/3-api/hooks-core-log-rejection)                                                   | Register a function with this hook that will be called whenever a logging event due to message rejection occurs                                             |
| [log_reopen](/momentum/3/3-api/hooks-core-log-reopen)                                                         | This is invoked when "reopen logs" is issued though ec_console.                                                                                             |
| [log_spool_import](/momentum/3/3-api/hooks-core-log-spool-import)                                             |                                                                                                                                                             |
| [log_transient_failure_v1](/momentum/3/3-api/hooks-core-log-transient-failure-v-1)                             | Register a function with this hook whenever a transient failure event should be logged.                                                                     |
| [mail_queue_get_next_active](/momentum/3/3-api/hooks-core-mail-queue-get-next-active)                         |                                                                                                                                                             |
| [mail_queue_insert_active](/momentum/3/3-api/hooks-core-mail-queue-insert-active)                             |                                                                                                                                                             |
| [mail_queue_maintain_domain](/momentum/3/3-api/hooks-core-mail-queue-maintain-domain)                         |                                                                                                                                                             |
| [mailq_get_next_active](/momentum/3/3-api/hooks-core-mailq-get-next-active)                                   |                                                                                                                                                             |
| [mailq_insert_active](/momentum/3/3-api/hooks-core-mailq-insert-active)                                       |                                                                                                                                                             |
| [message_body_in_core](/momentum/3/3-api/hooks-core-message-body-in-core)                                     |                                                                                                                                                             |
| [outbound_smtp_tls_verify_callback](/momentum/3/3-api/hooks-core-outbound-smtp-tls-verify-callback)           | This hook allows you to augment the built-in TLS verification process for outbound SMTP sessions.                                                           |
| [outbound_tls_ca](/momentum/3/3-api/hooks-core-outbound-tls-ca)                                               |                                                                                                                                                             |
| [outbound_tls_cert](/momentum/3/3-api/hooks-core-outbound-tls-cert)                                           |                                                                                                                                                             |
| [outbound_tls_ciphers](/momentum/3/3-api/hooks-core-outbound-tls-ciphers)                                     |                                                                                                                                                             |
| [outbound_tls_key](/momentum/3/3-api/hooks-core-outbound-tls-key)                                             |                                                                                                                                                             |
| [outbound_tls_verify](/momentum/3/3-api/hooks-core-outbound-tls-verify)                                       |                                                                                                                                                             |
| [post_assemble_fwd_message](/momentum/3/3-api/hooks-core-post-assemble-fwd-message)                           |                                                                                                                                                             |
| [post_config_commit](/momentum/3/3-api/hooks-core-post-config-commit)                                         |                                                                                                                                                             |
| [post_dns_handle_a](/momentum/3/3-api/hooks-core-post-dns-handle-a)                                           |                                                                                                                                                             |
| [post_dns_handle_mx](/momentum/3/3-api/hooks-core-post-dns-handle-mx)                                         |                                                                                                                                                             |
| [post_drop_privileges](/momentum/3/3-api/hooks-core-post-drop-privileges)                                     |                                                                                                                                                             |
| [post_event_read](/momentum/3/3-api/hooks-core-post-event-read)                                               |                                                                                                                                                             |
| [post_event_write](/momentum/3/3-api/hooks-core-post-event-write)                                             |                                                                                                                                                             |
| [post_generate_rfc3464_message](/momentum/3/3-api/hooks-core-post-generate-rfc-3464-message)                   |                                                                                                                                                             |
| [post_generate_soft_bounce_message](/momentum/3/3-api/hooks-core-post-generate-soft-bounce-message)           |                                                                                                                                                             |
| [post_initiate_connection_smtp](/momentum/3/3-api/hooks-core-post-initiate-connection-smtp)                   |                                                                                                                                                             |
| [post_mail_queue_maintain_domain](/momentum/3/3-api/hooks-core-post-mail-queue-maintain-domain)               |                                                                                                                                                             |
| [post_read_smtp](/momentum/3/3-api/hooks-core-post-read-smtp)                                                 | This hook is invoked immediately following data that has been read from the remote server during an outbound SMTP connection.                               |
| [post_smtp_command](/momentum/3/3-api/hooks-core-post-smtp-command)                                           |                                                                                                                                                             |
| [post_swap_in_meta](/momentum/3/3-api/hooks-core-post-swap-in-meta)                                           | Allows modules to perform actions immediately after the metadata file has been read from the spool. This hook is called even when the metadata fetch fails. |
| [post_validate_data_spool_each_rcpt_v1](/momentum/3/3-api/hooks-core-post-validate-data-spool-each-rcpt-v-1)   |                                                                                                                                                             |
| [post_validate_set_binding](/momentum/3/3-api/hooks-core-post-validate-set-binding)                           |                                                                                                                                                             |
| [pre_console_release](/momentum/3/3-api/hooks-core-pre-console-release)                                       |                                                                                                                                                             |
| [pre_dns_handle_a](/momentum/3/3-api/hooks-core-pre-dns-handle-a)                                             |                                                                                                                                                             |
| [pre_dns_handle_mx](/momentum/3/3-api/hooks-core-pre-dns-handle-mx)                                           |                                                                                                                                                             |
| [pre_drop_privileges](/momentum/3/3-api/hooks-core-pre-drop-privileges)                                       |                                                                                                                                                             |
| [pre_ec_can_relay_to](/momentum/3/3-api/hooks-core-pre-ec-can-relay-to)                                       |                                                                                                                                                             |
| [pre_esmtp_auth](/momentum/3/3-api/hooks-core-pre-esmtp-auth)                                                 |                                                                                                                                                             |
| [pre_event_close](/momentum/3/3-api/hooks-core-pre-event-close)                                               |                                                                                                                                                             |
| [pre_mail_queue_maintain_domain](/momentum/3/3-api/hooks-core-pre-mail-queue-maintain-domain)                 |                                                                                                                                                             |
| [pre_mail_queue_message_requeue](/momentum/3/3-api/hooks-core-pre-mail-queue-message-requeue)                 |                                                                                                                                                             |
| [pre_mailq_message_requeue](/momentum/3/3-api/hooks-core-pre-mailq-message-requeue)                           | Invoked immediately prior to a message requeue action caused by a delivery failure.                                                                         |
| [pre_read_smtp](/momentum/3/3-api/hooks-core-pre-read-smtp)                                                   |                                                                                                                                                             |
| [pre_swap_out_meta](/momentum/3/3-api/hooks-core-pre-swap-out-meta)                                           |                                                                                                                                                             |
| [premigrate_outbound_connection](/momentum/3/3-api/hooks-core-premigrate-outbound-connection)                 |                                                                                                                                                             |
| [rfc3464_inline_message_fragment](/momentum/3/3-api/hooks-core-rfc-3464-inline-message-fragment)               |                                                                                                                                                             |
| [server_esmtp_session_abort](/momentum/3/3-api/hooks-core-server-esmtp-session-abort)                         |                                                                                                                                                             |
| [set_delayed_queue_event](/momentum/3/3-api/hooks-core-set-delayed-queue-event)                               |                                                                                                                                                             |
| [smtp_client_mailfrom_args](/momentum/3/3-api/hooks-core-smtp-client-mailfrom-args)                           |                                                                                                                                                             |
| [smtp_client_rcptto_args](/momentum/3/3-api/hooks-core-smtp-client-rcptto-args)                               |                                                                                                                                                             |
| [smtp_client_xclient_args](/momentum/3/3-api/hooks-core-smtp-client-xclient-args)                             |                                                                                                                                                             |
| [smtp_error_classify](/momentum/3/3-api/hooks-core-smtp-error-classify)                                       |                                                                                                                                                             |
| [smtp_should_session_shutdown](/momentum/3/3-api/hooks-core-smtp-should-session-shutdown)                     | Determine whether an SMTP session should be shut down                                                                                                       |
| [swap_out_multi](/momentum/3/3-api/hooks-core-swap-out-multi)                                                 | Override or augment the internal call to swap_out_multi                                                                                                     |
| [sys_init](/momentum/3/3-api/hooks-core-sys-init)                                                             |                                                                                                                                                             |
| [use_outbound_tls](/momentum/3/3-api/hooks-core-use-outbound-tls)                                             |                                                                                                                                                             |
| [validate_accept](/momentum/3/3-api/hooks-core-validate-accept)                                               |                                                                                                                                                             |
| [validate_auth](/momentum/3/3-api/hooks-core-validate-auth)                                                   |                                                                                                                                                             |
| [validate_connect](/momentum/3/3-api/hooks-core-validate-connect)                                             |                                                                                                                                                             |
| [validate_data_spool_each_rcpt](/momentum/3/3-api/hooks-core-validate-data-spool-each-rcpt)                   | This hook is invoked after the normal validate_data_spool_each_rcpt module callback.                                                                        |
| [validate_expand_string](/momentum/3/3-api/hooks-core-validate-expand-string)                                 |                                                                                                                                                             |
| [veto_host_connection](/momentum/3/3-api/hooks-core-veto-host-connection)                                     |                                                                                                                                                             |
