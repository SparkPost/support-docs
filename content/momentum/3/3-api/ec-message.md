---
lastUpdated: "03/26/2020"
title: "Message Functions"
description: "Table of Contents add Add disclaimer to a message ec async fail Fails a message and removes it from the system ec message addref Create a reference to an existing message ec message assemble to legacy email message glue the parts back together into an in memory email message ec..."
---


| Name                                                                                                                                                  | Description                                                                                                                            |
|-------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [add](/momentum/3/3-api/apis-add)                                                                                 | Add disclaimer to a message                                                                                                            |
| [ec_async_fail](/momentum/3/3-api/apis-ec-async-fail)                                                             | Fails a message and removes it from the system                                                                                         |
| [ec_message_addref](/momentum/3/3-api/apis-ec-message-addref)                                                     | Create a reference to an existing message                                                                                              |
| [ec_message_assemble_to_legacy_email_message](/momentum/3/3-api/apis-ec-message-assemble-to-legacy-email-message) | glue the parts back together into an in-memory email_message                                                                           |
| [ec_message_assign_domain](/momentum/3/3-api/apis-ec-message-assign-domain)                                       | Modify the domain record of an ec_message                                                                                              |
| [ec_message_assign_domain_by_name](/momentum/3/3-api/apis-ec-message-assign-domain-by-name)                       | Assign the domain field of an ec_message based on the domain name string passed in as an argument                                      |
| [ec_message_body_in_core](/momentum/3/3-api/apis-ec-message-body-in-core)                                         | Checks (or arranges) for the message body to be paged in-core                                                                          |
| [ec_message_builder](/momentum/3/3-api/apis-ec-message-builder)                                                   | Convenience routine for building messages in a blocking fashion                                                                        |
| [ec_message_change_binding_slot](/momentum/3/3-api/apis-ec-message-change-binding-slot)                           | Set the binding for a message                                                                                                          |
| [ec_message_context_clean](/momentum/3/3-api/apis-ec-message-context-clean)                                       | Cleans the appropriate per-message dictionary                                                                                          |
| [ec_message_context_delete](/momentum/3/3-api/apis-ec-message-context-delete)                                     | Delete a key/value pair from the message context or connection context dictionary                                                      |
| [ec_message_context_copy](/momentum/3/3-api/apis-ec-message-context-copy)                                         | Copy a context variable from one ec_message to another                                                                                 |
| [ec_message_context_discard](/momentum/3/3-api/apis-ec-message-context-discard)                                   | Discards the context dictionaries. They will be re-fetched on demand                                                                   |
| [ec_message_context_exists](/momentum/3/3-api/apis-ec-message-context-exists)                                     | Determines whether a provided key exists in the connection context or message context dictionary                                       |
| [ec_message_context_exists_and_get](/momentum/3/3-api/apis-ec-message-context-exists-and-get)                     | Determines whether a dictionary key exists and, if so, supplies a reference to the value                                               |
| [ec_message_context_firstkey](/momentum/3/3-api/apis-ec-message-context-firstkey)                                 | Returns a pointer to the first key in the appropriate per-message dictionary, NULL if the dictionary is empty                          |
| [ec_message_context_get](/momentum/3/3-api/apis-ec-message-context-get)                                           | Returns a pointer to the value of the key in the appropriate dictionary, otherwise it returns an empty string                          |
| [ec_message_context_nextkey](/momentum/3/3-api/apis-ec-message-context-nextkey)                                   | Returns a pointer to the 'next' key in the appropriate per-message dictionary, NULL if there are no more keys                          |
| [ec_message_context_set](/momentum/3/3-api/apis-ec-message-context-set)                                           | Store a key/value pair in the appropriate context dictionary                                                                           |
| [ec_message_context_size](/momentum/3/3-api/apis-ec-message-context-size)                                         | Returns the size of the appropriate per-message dictionary                                                                             |
| [ec_message_copy](/momentum/3/3-api/apis-ec-message-copy)                                                         | Create a copy of an existing message                                                                                                   |
| [ec_message_cowref](/momentum/3/3-api/apis-ec-message-cowref)                                                     | Create a copy-on-write reference to an existing message                                                                                |
| [ec_message_enqueue](/momentum/3/3-api/apis-ec-message-enqueue)                                                   | Enqueue a message                                                                                                                      |
| [ec_message_extract_part_to_string](/momentum/3/3-api/apis-ec-message-extract-part-to-string)                     | Extract a message part to a string, decoding transfer encoding                                                                         |
| [ec_message_extract_part_to_string2](/momentum/3/3-api/apis-ec-message-extract-part-to-string-2)                   | Extract a message part to a string, decoding transfer encoding                                                                         |
| [ec_message_free](/momentum/3/3-api/apis-ec-message-free)                                                         | Release resources held by this message                                                                                                 |
| [ec_message_get_body_fd_for_mmap](/momentum/3/3-api/apis-ec-message-get-body-fd-for-mmap)                         | Requests the file descriptor from the IO layer for the purpose of memory mapping                                                       |
| [ec_message_get_body_io_object](/momentum/3/3-api/apis-ec-message-get-body-io-object)                             | Requests an io_object from the IO layer                                                                                                |
| [ec_message_get_code](/momentum/3/3-api/apis-ec-message-get-code)                                                 | Fetches the code set for the message                                                                                                   |
| [ec_message_get_delivery_method](/momentum/3/3-api/apis-ec-message-get-delivery-method)                           | Retrieve the delivery method of a message                                                                                              |
| [ec_message_get_envelope](/momentum/3/3-api/apis-ec-message-get-envelope)                                         | Returns information from the envelope of the message                                                                                   |
| [ec_message_get_envelope2](/momentum/3/3-api/apis-ec-message-get-envelope-2)                                       | Return information from the envelope of the message                                                                                    |
| [ec_message_get_first_part](/momentum/3/3-api/apis-ec-message-get-first-part)                                     | Returns the top level mime part of the message                                                                                         |
| [ec_message_get_headers](/momentum/3/3-api/apis-ec-message-get-headers)                                           | Returns an rfc2822_context struct which stores the headers for the message part                                                        |
| [ec_message_get_mailfrom](/momentum/3/3-api/apis-ec-message-get-mailfrom)                                         | Returns the entire protocol-decorated mailfrom string                                                                                  |
| [ec_message_get_message_memory](/momentum/3/3-api/apis-ec-message-get-message-memory)                             | Returns a pointer to the message memory                                                                                                |
| [ec_message_get_message_size](/momentum/3/3-api/apis-ec-message-get-message-size)                                 | Returns the message size, in bytes                                                                                                     |
| [ec_message_get_pathway](/momentum/3/3-api/apis-ec-message-get-pathway)                                           | Get the pathway of a message                                                                                                           |
| [ec_message_get_rcptto](/momentum/3/3-api/apis-ec-message-get-rcptto)                                             | returns the entire protocol-decorated rcptto string                                                                                    |
| [ec_message_get_routing_domain](/momentum/3/3-api/apis-ec-message-get-routing-domain)                             | Get the routing domain of the message                                                                                                  |
| [ec_message_get_routing_domain2](/momentum/3/3-api/apis-ec-message-get-routing-domain-2)                           | Get the routing domain of the message                                                                                                  |
| [ec_message_is_large](/momentum/3/3-api/apis-ec-message-is-large)                                                 | Indicates if a message is large                                                                                                        |
| [ec_message_is_mcmt](/momentum/3/3-api/apis-ec-message-is-mcmt)                                                   | returns 1 if the message is a MCMT container                                                                                           |
| [ec_message_lock](/momentum/3/3-api/apis-ec-message-lock)                                                         | Perform a mutex lock operation                                                                                                         |
| [ec_message_mcmt_fixup](/momentum/3/3-api/apis-ec-message-mcmt-fixup)                                             | This function is to be called by a listener when an injected message is a MCMT container (i.e                                          |
| [ec_message_new](/momentum/3/3-api/apis-ec-message-new)                                                           | Create a new message                                                                                                                   |
| [ec_message_parser_defaults](/momentum/3/3-api/apis-ec-message-parser-defaults)                                   | Obtain message parsing/validation defaults                                                                                             |
| [ec_message_parser_defaults2](/momentum/3/3-api/apis-ec-message-parser-defaults-2)                                 | Obtain message parsing/validation defaults                                                                                             |
| [ec_message_parser_strerror](/momentum/3/3-api/apis-ec-message-parser-strerror)                                   | Returns a string representation of a message parsing error code                                                                        |
| [ec_message_part_add_child_first](/momentum/3/3-api/apis-ec-message-part-add-child-first)                         | Add part as the first child of another part                                                                                            |
| [ec_message_part_add_child_last](/momentum/3/3-api/apis-ec-message-part-add-child-last)                           | Add part as the last child of another part                                                                                             |
| [ec_message_part_copy_to_io_object](/momentum/3/3-api/apis-ec-message-part-copy-to-io-object)                     | Render/Copy a message part to an io_object                                                                                             |
| [ec_message_part_create_multipart](/momentum/3/3-api/apis-ec-message-part-create-multipart)                       | Create a new multipart container part                                                                                                  |
| [ec_message_part_create_singleton](/momentum/3/3-api/apis-ec-message-part-create-singleton)                       | Create a new singleton message part                                                                                                    |
| [ec_message_part_extract](/momentum/3/3-api/apis-ec-message-part-extract)                                         | Prepare to extract a message part in a streaming fashion                                                                               |
| [ec_message_part_extract2](/momentum/3/3-api/apis-ec-message-part-extract-2)                                       | Prepare to extract a message part in a streaming fashion                                                                               |
| [ec_message_part_get_content_type](/momentum/3/3-api/apis-ec-message-part-get-content-type)                       | Returns the content type and charset for a given part                                                                                  |
| [ec_message_part_get_content_type2](/momentum/3/3-api/apis-ec-message-part-get-content-type-2)                     | Returns the content type and charset for a given part using strings                                                                    |
| [ec_message_part_get_content_type3](/momentum/3/3-api/apis-ec-message-part-get-content-type-3)                     | Returns the content type and charset for a given part                                                                                  |
| [ec_message_part_insert_after](/momentum/3/3-api/apis-ec-message-part-insert-after)                               | Insert a part after another part                                                                                                       |
| [ec_message_part_insert_before](/momentum/3/3-api/apis-ec-message-part-insert-before)                             | Insert a part ahead of another part                                                                                                    |
| [ec_message_part_touch](/momentum/3/3-api/apis-ec-message-part-touch)                                             | Flags a message part as having been modified                                                                                           |
| [ec_message_part_unlink](/momentum/3/3-api/apis-ec-message-part-unlink)                                           | Unlink part from the mime tree                                                                                                         |
| [ec_message_refetch_meta](/momentum/3/3-api/apis-ec-message-refetch-meta)                                         | refetch extended meta information from the spool                                                                                       |
| [ec_message_register_parser](/momentum/3/3-api/apis-ec-message-register-parser)                                   | Replaces the core message parser                                                                                                       |
| [ec_message_release_body_io_object](/momentum/3/3-api/apis-ec-message-release-body-io-object)                     | Releases the body io_object                                                                                                            |
| [ec_message_render_headers_to_string](/momentum/3/3-api/apis-ec-message-render-headers-to-string)                 | Renders the headers of the first part of a message to a string                                                                         |
| [ec_message_render_meta_to_string](/momentum/3/3-api/apis-ec-message-render-meta-to-string)                       | Renders meta information about the message to a string                                                                                 |
| [ec_message_render_part_headers_to_string](/momentum/3/3-api/apis-ec-message-render-part-headers-to-string)       | Render the headers of a message part to a string                                                                                       |
| [ec_message_render_part_to_string](/momentum/3/3-api/apis-ec-message-render-part-to-string)                       | Render a message part to a string                                                                                                      |
| [ec_message_render_to_string](/momentum/3/3-api/apis-ec-message-render-to-string)                                 | Renders a message, swapping it in if needed                                                                                            |
| [ec_message_rsrc_copy](/momentum/3/3-api/apis-ec-message-rsrc-copy)                                               | Duplicate resource identifiers from source into destination                                                                            |
| [ec_message_rsrc_create](/momentum/3/3-api/apis-ec-message-rsrc-create)                                           | This creates an empty container for a resource identified with name                                                                    |
| [ec_message_rsrc_destroy](/momentum/3/3-api/apis-ec-message-rsrc-destroy)                                         | Removes the resource with the given name from the message in-memory resource list and then passes the resource to ec_message_rsrc_free |
| [ec_message_rsrc_flush](/momentum/3/3-api/apis-ec-message-rsrc-flush)                                             | Explicitly flush the resource name to its relevant backing store                                                                       |
| [ec_message_rsrc_free](/momentum/3/3-api/apis-ec-message-rsrc-free)                                               | Allows the underlying operating system to reclaim memory and objects associated with the given resource                                |
| [ec_message_rsrc_get](/momentum/3/3-api/apis-ec-message-rsrc-get)                                                 | This will return the I/O object associated with the resource name as well as the state                                                 |
| [ec_message_rsrc_remove](/momentum/3/3-api/apis-ec-message-rsrc-remove)                                           | This will set the resource name in message to state EC_MESSAGE_RSRC_DELETED                                                            |
| [ec_message_rsrc_set](/momentum/3/3-api/apis-ec-message-rsrc-set)                                                 | This function associates I/O object source with the resource name for message                                                          |
| [ec_message_rsrc_state](/momentum/3/3-api/apis-ec-message-rsrc-state)                                             | This will return a state hint of a given resource                                                                                      |
| [ec_message_rsrc_string](/momentum/3/3-api/apis-ec-message-rsrc-string)                                           | Returns a string representation of the resources associated with the message                                                           |
| [ec_message_select_binding_by_group](/momentum/3/3-api/apis-ec-message-select-binding-by-group)                   | Select a binding from a binding group                                                                                                  |
| [ec_message_separate](/momentum/3/3-api/apis-ec-message-separate)                                                 | Separate references to an existing message                                                                                             |
| [ec_message_set__object](/momentum/3/3-api/apis-ec-message-set-object)                                           | set the _object for a message, maintaining appropriate accounting                                                                      |
| [ec_message_set_code](/momentum/3/3-api/apis-ec-message-set-code)                                                 | Set the message delivery code meta information                                                                                         |
| [ec_message_set_envelope](/momentum/3/3-api/apis-ec-message-set-envelope)                                         | Sets envelope information for the message                                                                                              |
| [ec_message_set_first_part](/momentum/3/3-api/apis-ec-message-set-first-part)                                     | Accessor function for changing the top level mime part for a message                                                                   |
| [ec_message_set_mailfrom](/momentum/3/3-api/apis-ec-message-set-mailfrom)                                         | sets the entire protocol decorated mailfrom string                                                                                     |
| [ec_message_set_next_attempt](/momentum/3/3-api/apis-ec-message-set-next-attempt)                                 | Determines and sets the next attempt time for the message                                                                              |
| [ec_message_set_parser_defaults](/momentum/3/3-api/apis-ec-message-set-parser-defaults)                           | Set message parsing/validation defaults                                                                                                |
| [ec_message_set_rcptto](/momentum/3/3-api/apis-ec-message-set-rcptto)                                             | sets the entire protocol decorated rcptto string                                                                                       |
| [ec_message_should_reduce_resources](/momentum/3/3-api/apis-ec-message-should-reduce-resources)                   | Determines whether or not a message should be removed from memory                                                                      |
| [ec_message_snapshot](/momentum/3/3-api/apis-ec-message-snapshot)                                                 | Create a snapshot of an existing message                                                                                               |
| [ec_message_swap_in](/momentum/3/3-api/apis-ec-message-swap-in)                                                   | causes the message content to be read in from disk                                                                                     |
| [ec_message_swap_out](/momentum/3/3-api/apis-ec-message-swap-out)                                                 | cause a message to be written to disk                                                                                                  |
| [ec_message_swap_out_meta](/momentum/3/3-api/apis-ec-message-swap-out-meta)                                       | Write message meta data to disk                                                                                                        |
| [ec_message_unlink_on_free](/momentum/3/3-api/apis-ec-message-unlink-on-free)                                     | Marks the message as to be removed from disk when the last reference is dropped                                                        |
| [ec_message_unlock](/momentum/3/3-api/apis-ec-message-unlock)                                                     | Perform a message unlock operation                                                                                                     |
| [ec_retry_state_delref](/momentum/3/3-api/apis-ec-retry-state-delref)                                             | Removes a reference from a retry state, and destroys it if no more exist                                                               |
| [ec_retry_state_get](/momentum/3/3-api/apis-ec-retry-state-get)                                                   | Retrieves or allocates a retry state associated with the given binding and domain                                                      |
| [ec_retry_state_next](/momentum/3/3-api/apis-ec-retry-state-next)                                                 | Return next offset associated with a retry state distribution, bounded to ceiling                                                      |
| [ec_retry_state_reset](/momentum/3/3-api/apis-ec-retry-state-reset)                                               | Resets a retry state                                                                                                                   |
| [ob_get_current_message](/momentum/3/3-api/apis-ob-get-current-message)                                           | Utility function to return the current ec_message                                                                                      |

The `ec_message` data structure is documented at [“ec_message”](/momentum/3/3-api/structs-ec-message).